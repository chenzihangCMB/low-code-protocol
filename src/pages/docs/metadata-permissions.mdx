---
title: 权限元数据
description: 定义权限相关元数据
---


## 简档 .profile.yml

简档只约定了一个名称，定义了简档之后，就可以在对象权限中定义此简档对具体对象的访问权限。

一个用户只能属于一个简档。元数据中不能指定具体用户的具体简档。系统管理员可以在用户管理界面中设置用户的简档。

系统有4个默认简档：

* admin： 系统管理员，默认对所有对象有最高权限
* user： 普通用户，通常对大部分对象拥有增删改权限
* customer： 外部客户，默认无权限
* supplier： 外部供应商，默认无权限

```yaml
name: user
license: platform
```

| 属性名 | 属性值类型 | 属性含义 |
|----|----|----|
| name | string | API 名称 |
| label | string | 显示名称 |
| type | string | 类别 |
| license | string | 许可证 |
| assigned_apps | array | 授权应用 |
| users | array | 成员 |
| is_system | boolean | 系统 |
| password_history | string | 强制密码历史。默认值3 |
| max_login_attempts | string | 最大无效登录尝试次数。默认值10 |
| lockout_interval | string | 锁定有效期间。默认值15 |
| enable_MFA | boolean | 多重身份验证(需要开启短信服务) |
| logout_other_clients | boolean | 单例登录 |
| login_expiration_in_days | number | 登录到期时间(天) |
| phone_logout_other_clients | boolean | 手机App单例登录 |
| phone_login_expiration_in_days | number | 手机App登录到期时间(天) |

## 权限集 .permissionset.yml

权限集只约定了一个名称，定义了权限集之后，就可以在对象权限中定义此权限集对具体对象的访问权限。

一个用户可以拥有多个权限集，最终权限为叠加之后的结果。

元数据中未约定权限集并未绑定到具体用户，系统管理员可以在设置界面中配置适用此权限集的用户清单。

```yaml
name: contract_manager
label: 合同管理员
type: permission_set
```

系统有2个默认权限集：

* organization_admin： 分部管理员，用于为分部管理员额外增加权限。
* workflow_admin： 流程管理员，用于为流程管理员额外增加权限。

| 属性名 | 属性值类型 | 属性含义 |
|----|----|----|
| name | string | API 名称 |
| label | string | 显示名称 |
| type | string | 类别 |
| license | string | 许可证 |
| assigned_apps | array | 授权应用 |
| users | array | 成员 |
| is_system | boolean | 系统 |

## 对象权限 .permission.yml

设定某一个简档（或权限集）对当前对象的访问权限。

```yaml
name: 合同.用户
allowCreate: true
allowDelete: true
allowEdit: true
allowRead: true
modifyAllRecords: false
modifyCompanyRecords: false
permission_set_id: user
viewAllRecords: false
viewCompanyRecords: false
```

| 属性名 | 属性值类型 | 属性含义 |
|----|----|----|
| name | string | 名称 |
| permission_set_id | string | 权限集 |
| object_name | string | 对象 |
| allowRead | boolean | 允许查看 |
| allowCreate | boolean | 允许创建 |
| allowEdit | boolean | 允许修改 |
| allowDelete | boolean | 允许删除 |
| viewAllRecords | boolean | 查看所有记录 |
| modifyAllRecords | boolean | 修改所有记录 |
| viewCompanyRecords | boolean | 查看本分部 |
| modifyCompanyRecords | boolean | 修改本分部 |
| viewAssignCompanysRecords | array | 查看指定分部 |
| modifyAssignCompanysRecords | array | 修改指定分部 |
| allowReadFiles | boolean | 允许查看附件 |
| allowCreateFiles | boolean | 允许创建附件 |
| allowEditFiles | boolean | 允许修改附件 |
| allowDeleteFiles | boolean | 允许删除附件 |
| viewAllFiles | boolean | 查看所有附件 |
| modifyAllFiles | boolean | 修改所有附件 |
| disabled_list_views | array | 禁用对象列表视图 |
| disabled_actions | array | 禁用操作按钮 |
| unreadable_fields | array | 不可见字段 |
| uneditable_fields | array | 不可编辑字段 |
| unrelated_objects | array | 禁用关联对象 |
| uneditable_related_list | array | 关联对象只读 |
| field_permissions | object | 字段权限 |

## 字段权限 .permission.yml

设定某一个简档（或权限集）对当前对象下的字段的访问权限，与对象权限共用配置文件，相关配置保存在`field_permissions`属性中。

```yaml
name: 合同.用户
allowCreate: true
allowDelete: true
allowEdit: true
allowRead: true
modifyAllRecords: false
modifyCompanyRecords: false
permission_set_id: user
viewAllRecords: false
viewCompanyRecords: false
field_permissions:
  - field: name
    readable: true
    editable: true
  - field: owner
    readable: false
    editable: true
  - field: created
    readable: true
    editable: false
  - field: created_by
    readable: true
    editable: false
  - field: modified
    readable: true
    editable: false
  - field: modified_by
    readable: true
    editable: false
  - field: locked
    readable: false
    editable: false
  - field: company_id
    readable: false
    editable: false
  - field: company_ids
    readable: false
    editable: false
  - field: instance_state
    readable: false
    editable: false
  - field: amount__c
    readable: true
    editable: true
```

| 属性名 | 属性值类型 | 属性含义 |
|----|----|----|
| field | string | 字段 Api 名称 |
| readable | boolean | 允许查看 |
| editable | boolean | 允许编辑 |

## 限制规则 .restrictionRule.yml

在对象上配置限制规则来收缩用户对业务对象记录级的查看权限，满足此过滤条件的记录，用户始终禁止查看。
该规则并不是基于简档（或权限集）来配置，但是可以在指定条目条件中判断当前用户所属简档（或权限集）。

```yaml
name: test
entry_criteria: '{{$user.roles.indexOf(‘salesman‘) > -1}}'
object_name: contracts__c
record_filter: '{{[[“profile__c“, “=“, “customer“], “or“, [“owner“, “=“, $user.userId]]}}'
```

| 属性名 | 属性值类型 | 属性含义 |
|----|----|----|
| name | string | Api 名称 |
| object_name | string | 对象 |
| active | boolean | 启用 |
| entry_criteria | string | 指定条目条件 |
| record_filter | string | 记录过滤器 |
| description | string | 描述 |
| is_system | boolean | 系统 |

## 共享规则 .shareRule.yml

在对象上配置共享规则来放大用户对业务对象记录级的查看权限，满足此规则的记录，用户始终可以查看。
该规则并不是基于简档（或权限集）来配置，但是可以在指定条目条件中判断当前用户所属简档（或权限集）。

```yaml
name: test
active: true
entry_criteria: '{{$user.roles.indexOf(‘salesman‘) > -1}}'
object_name: contracts__c
record_filter: '{{[[“company_id“, “=“, $user.company_id],[“profile__c“, “=“, “customer“]]}}'
```

| 属性名 | 属性值类型 | 属性含义 |
|----|----|----|
| name | string | Api 名称 |
| object_name | string | 对象 |
| active | boolean | 启用 |
| entry_criteria | string | 指定条目条件 |
| record_filter | string | 记录过滤器 |
| description | string | 描述 |
| is_system | boolean | 系统 |